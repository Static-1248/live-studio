# 直播间定制项目

> 这是一个小型web项目，以定制作者的直播间。

## 项目介绍 - v0.2

### 原理
- 作者的bilibili直播间由三类元素组成：
	
	- 自定义web视图（此项目），构建界面基础框架
	- 彗星号插件，提供现成高级插件
	- 其他通过bilibili直播软件直接添加的元素，如屏幕录制等

	这些元素作为bilibili直播软件内集合，逐个叠加，构成作者的直播间。

	此项目负责渲染一个web页面，作为直播间的一部分提供基本ui框架，并渲染若干所需的基础功能模块。

### 技术架构

采用前后端分离设计：

1. **服务器**
	- 挂载静态页面（也即下面两个前端页面），提供http服务
	- 与前端通过WebSocket通信，实现双向通信

2. **前端视图**

    - **自定义组件列表**:
		- **打字机**：
	    	- 一块可编辑的文本区，主播的短期留言，方便主播不方便说话时与观众交流，也让观众不会错过一些重要留言。
			- 在新布局下只占一条横幅大小的区域，可以类比于“一行聊天输入框”
	    	- 在刷新时有动画效果：淡出旧文本，“逐字打出”新文本
	    	- 核心优势：
                | 特性                | 传统口播       | 文字系统       |
                |---------------------|---------------|---------------|
                | 内容留存            | ❌            | ✔️            |
                | 后期观众可见性      | ❌            | ✔️            |
                | 多语言支持          | ❌            | ✔️            |
		- 介绍区：
	    	- 也是可编辑文本，直播间简介，主播的长期、基本留言
	    	- 由于区域较小，采用翻页方式展示，定时切换页面
	    	- 由于技术力有限，多页文本在后台作为一段整体编辑，介绍文本里当一行内容仅为"---"时即标记分页
	    	- 设定一个最低翻页时间；当一页内容超过本模块高度时尽可能在翻页时间内滚动显示完；
	    	- 但同时设定一个速度上限，以防止固定翻页时间内内容过长导致滚动过快。当内容过长时，翻页时间会自动延长，速度控制至此上限。
		- 横幅:
			- 一行可编辑文本，用于显示直播间标题、标语等
	    	- 以固定速度滚动显示
			- 丢弃换行符		
		- 动态背景: 3D星空动态背景	
			- 使用three.js实现
			- 内容：摄像机在一片星辰大海中向前飞行				
	
	- **直播间设计**:
	
	    直播间的内容设计如下：
        
	    - 背景：动态背景
    
	    - 左区（大比例）：
	    	- 顶部横幅：显示直播间标题、标语等（彗星号插件，此处为占位符）
	    	- 主体:屏幕录制直播（由直播软件负责渲染，此处为占位符）
	    	- 底部：打字机（如上文所述）
	    
	    - 右区（小比例）：由多个模块组成，包括：
			- 右上-介绍区(如上文所述)
	    	- 右中弹幕姬：显示直播间最近弹幕（彗星号插件，此处为占位符）
	    	- 右下点歌姬：显示点歌信息（彗星号插件，此处为占位符）

3. **控制面板**
   - 后台管理界面，建议使用浏览器打开，用于控制直播间的各个模块
   - 功能模块：
		- 打字机设置
			- 可编辑多个文本模板；可将当前编辑框内容“发送”，以应用内容。
			- 支持快捷键：Ctrl+S 保存当前文本；Ctrl+U 发送当前文本
		- 介绍文本设置
			- 与打字机设置类似
			- 选项：最低翻页时间、速度上限

**其他信息**：
- 作者熟悉 js & 前端开发
- 技术栈：
	- 前端：Vite + Vue3 + Pinia + TailwindCSS
	- 后端：Node.js + Fastify + Socket.IO

## 项目状态

- **进度**：
  - 历史版本记录参见：[changelog.md](./changelog.md)
  - 正在开发: v0.2（优化调整版）

  - **已完成：**
    - v0.1 初版（已投入直播使用）
      - 基础WebSocket通信
      - 初版界面布局
      - 打字机与介绍文本基础功能
      - 星空背景实现

  - **正在进行：**
    - 3D星空背景升级（Three.js实现）
    - 布局优化适配彗星号插件
    - 介绍文本分页逻辑改进（"---"分页符支持）

  - **待完成：**
    - 控制面板UI优化
    - 背景性能调优
    - 文本存储方案改进

- **其他**：
  - 项目已投入直播使用，但仍在不断优化中
  - 项目代码托管于Github，[项目地址](https://github.com/Static-1248/live-studio)
  - 在开发过程中，开发者会自己操作和维护服务器和vite dev server，所以AI完成任务后无需发起运行命令

## 版本规划
- **v0.2** - 布局优化
  - 整合彗星号插件占位布局
  - 3D背景系统升级
  - 分页逻辑增强

- **v0.3** - 功能扩展
  - 主题切换功能
  - 云端配置同步方案
  - 插件系统原型
